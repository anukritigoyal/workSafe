(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},164:function(e,t,a){},166:function(e,t,a){},168:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),i=a.n(s),c=(a(80),a(3)),o=a(4),l=a(7),u=a(5),m=a(6),h=a(182),d=a(179),p=(a(82),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).meta={name:"",user_id:"",isHr:!1},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateUser",value:function(){this.meta.name?(this.meta.user_id||delete this.meta.user_id,this.props.auth.updateMetadata(this.meta)):alert("Please enter a valid name")}},{key:"handleChange",value:function(e,t){this.meta[e]=t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"backdrop bg-dark"},r.a.createElement("div",{className:"register card"},r.a.createElement("p",{className:"register-info"},"First, we just need to collect some information from you."),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nameInput"},"Name"),r.a.createElement("input",{className:"form-control",id:"nameInput",placeholder:"First Last",onChange:function(t){return e.handleChange("name",t.currentTarget.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"idInput"},"Employee ID"),r.a.createElement("input",{className:"form-control",id:"idInput",placeholder:"If applicable",onChange:function(t){return e.handleChange("user_id",t.currentTarget.value)}})),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"hrCheck",value:"isHr",onChange:function(t){return e.handleChange("isHr",t.currentTarget.checked)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"hrCheck"},"HR Employee")),r.a.createElement("div",{className:"btn-div"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.updateUser()}},"Register"))))}}]),t}(r.a.Component)),f={login:"/",callback:"/callback",register:"/register",employee:"/employee",landing:"/employee/about",profile:"/employee/profile",empReport:"/employee/report",hr:"/hr",hrPage:"/hr/hrpage",dashboard:"/hr/dashboard",hrReport:"/hr/report-page",hrResolved:"/hr/resolved",url:"https://lukepallen.github.io/workSafe/"},b=(a(84),a(184)),v=a(71),E=a.n(v),y=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"empHeader"},r.a.createElement("div",{className:"title"},r.a.createElement("img",{src:E.a,alt:"Logo"})),r.a.createElement("div",{className:"navbar"},r.a.createElement(b.a,{to:f.empReport,activeClassName:"selected",className:"link"},"Report"),r.a.createElement(b.a,{to:f.profile,activeClassName:"selected",className:"link"},"Profile"),r.a.createElement("button",{className:"btn btn-outline-primary logoutBtn",onClick:function(){return e.props.auth.logout()}},"Logout")))}}]),t}(r.a.Component),g=a(72),k=a.n(g),j=a(41),N=a(42),O=a.n(N);O.a.apps.length||O.a.initializeApp({apiKey:"AIzaSyDNjt0ZQR50uFWwvHiLMs3dR3OckvzteLo",authDomain:"worksafe-630dd.firebaseapp.com",databaseURL:"https://worksafe-630dd.firebaseio.com",projectId:"worksafe-630dd",storageBucket:"worksafe-630dd.appspot.com",messagingSenderId:"866713004286"});var w=O.a,C=function(){function e(){Object(c.a)(this,e),this.db=w.firestore().collection("reports")}return Object(o.a)(e,[{key:"add",value:function(e){return this.db.add(e)}},{key:"get",value:function(e){var t=[];return this.db.where("name","==",e).get().then(function(e){return e.forEach(function(e){return t.push(Object(j.a)({},e.id,e.data()))}),t})}},{key:"getAll",value:function(){var e=[];return this.db.get().then(function(t){return t.forEach(function(t){return e.push(Object(j.a)({},t.id,t.data()))}),e})}},{key:"getByStatus",value:function(e){var t=[];return this.db.where("status","==",e).get().then(function(e){return e.forEach(function(e){return t.push(Object(j.a)({},e.id,e.data()))}),t})}},{key:"updateStatus",value:function(e,t){return this.db.doc(e).update({status:t}).then(function(){console.log("Updated to"+t)})}}]),e}(),T=a(183),S=a(15),I=a.n(S),R=(a(154),a(156),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).checkDate=function(e){return e-I()(new Date)<=0},e.state={userType:"",toDashboard:!1},e.reportInfo={name:"",datetime:"",location:"",type:"",harasser:"",description:"",status:"Awaiting Review",reportType:""},e.firebase=new C,e.user=void 0,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.auth.user.subscribe(function(t){e.user=t,e.reportInfo.name=e.user.user_metadata.name})}},{key:"handleChange",value:function(e,t){this.reportInfo[e]=t}},{key:"fileReport",value:function(){var e=this;this.reportInfo.timeFiled=I()().format(),this.firebase.add(this.reportInfo).then(function(){return e.setState({toDashboard:!0})})}},{key:"render",value:function(){var e=this;return!0===this.state.toDashboard?r.a.createElement(T.a,{to:f.profile}):r.a.createElement("div",{className:"report"},this.state.userType?r.a.createElement("div",{className:"buffer"},r.a.createElement("div",{className:"empForm"},r.a.createElement("div",{className:"name formSection"},r.a.createElement("p",{className:"label"},"Name"),r.a.createElement("p",null,this.reportInfo.name)),r.a.createElement("div",{className:"dateTime formSection short"},r.a.createElement("div",{className:"date"},r.a.createElement("p",{className:"label"},"Date and Approximate Time of Occurence"),r.a.createElement(k.a,{onChange:function(t){return e.handleChange("datetime",I.a.utc(t).format())},isValidDate:this.checkDate}))),r.a.createElement("div",{className:"location formSection short"},r.a.createElement("p",{className:"label"},"Location"),r.a.createElement("input",{type:"text",className:"form-control form-control-sm","aria-describedby":"locationInput",onChange:function(t){return e.handleChange("location",t.currentTarget.value)}})),r.a.createElement("div",{className:"type formSection short"},r.a.createElement("p",{className:"label"},"Type of Harassment"),r.a.createElement("select",{type:"text",className:"form-control form-control-sm",onChange:function(t){return e.handleChange("type",t.currentTarget.value)}},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Select Harassment Type"),r.a.createElement("option",null,"Sexual Harassment"),r.a.createElement("option",null,"Workplace Bullying"),r.a.createElement("option",null,"Retaliation"),r.a.createElement("option",null,"Ageism"),r.a.createElement("option",null,"Racial Harassment"),r.a.createElement("option",null,"Disability-Based Harassment"))),r.a.createElement("div",{className:"harasser formSection short"},r.a.createElement("p",{className:"label"},"Harasser"),r.a.createElement("input",{type:"text",className:"form-control form-control-sm","aria-describedby":"harasserInput",onChange:function(t){return e.handleChange("harasser",t.currentTarget.value)}})),r.a.createElement("div",{className:"bystander formSection short"},r.a.createElement("p",{className:"label"},"bystander"===this.state.userType?"Parties ":"Bystanders"," Present "),r.a.createElement("input",{type:"text",className:"form-control form-control-sm","aria-describedby":"bystanderInput",onChange:function(t){var a="bystander"===e.state.userType?"parties ":"bystanders";e.handleChange(a,t.currentTarget.value)}})),r.a.createElement("div",{className:"description formSection"},r.a.createElement("p",{className:"label"},"Description"),r.a.createElement("textarea",{type:"text",className:"form-control form-control-sm",rows:"2",onChange:function(t){return e.handleChange("description",t.currentTarget.value)}})),r.a.createElement("div",{className:"evidence formSection short"},r.a.createElement("p",{className:"label"},"Additional Evidence"),r.a.createElement("input",{type:"file",className:"form-control-file",id:"exampleFormControlFile1"}))),r.a.createElement("div",{className:"submit"},r.a.createElement("button",{className:"btn submitBtn",onClick:function(){return e.fileReport()}},"Submit"))):r.a.createElement("div",{className:"select"},r.a.createElement("div",{className:"select-btns"},r.a.createElement("button",{className:"btn btn1",onClick:function(){e.setState({userType:"bystander"}),e.reportInfo.reportType="bystander"}},"Bystander"),r.a.createElement("button",{className:"btn btn1",onClick:function(){e.setState({userType:"firstHand"}),e.reportInfo.reportType="first hand"}},"First Hand"))))}}]),t}(r.a.Component)),D=(a(158),a(160),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("p",{className:"label"},"Status:"),r.a.createElement("p",{className:"content"},this.props.status),r.a.createElement("p",{className:"label"},"Description:"),r.a.createElement("p",{className:"content"},this.props.desc),r.a.createElement("p",{className:"label"},"Date and Time of Occurence:"),r.a.createElement("p",{className:"content"},I()(this.props.time).format("LLLL")))}}]),t}(r.a.Component)),H=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={rows:[]},e.firebase=new C,e.user=void 0,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.auth.user.subscribe(function(t){e.user=t,e.fetchData()})}},{key:"fetchData",value:function(){var e=this;this.firebase.get(this.user.user_metadata.name).then(function(t){var a=t.map(function(e){var t;return Object.keys(e).forEach(function(a){return t=e[a]}),t});e.setState({rows:a})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"reports"},r.a.createElement("p",{className:"label"},"Reports Filed"),r.a.createElement("div",null,0!==this.state.rows.length?this.state.rows.map(function(e){return r.a.createElement(D,{desc:e.description,time:e.datetime,status:e.status})}):r.a.createElement("p",null,"Go to the report tab to file a report"))))}}]),t}(r.a.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.auth.isAuthenticated()||(this.props.auth.setEmployeeType("employee"),this.props.auth.login()),r.a.createElement("div",{className:"body"},r.a.createElement("div",null,r.a.createElement(y,{auth:this.props.auth})),r.a.createElement("div",{className:"main"},r.a.createElement(d.a,{path:f.empReport,render:function(t){return r.a.createElement(R,Object.assign({auth:e.props.auth},t))}}),r.a.createElement(d.a,{path:f.profile,render:function(t){return r.a.createElement(H,Object.assign({auth:e.props.auth},t))}}),r.a.createElement(h.a,{to:f.empReport})))}}]),t}(n.Component),_=(a(162),a(164),a(73)),x=a.n(_),M=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title"},r.a.createElement("img",{src:x.a,alt:"Logo"})),r.a.createElement("div",{className:"tabs"},r.a.createElement(b.a,{to:f.hrPage,activeClassName:"selected",className:"link"},"Pending Reports"),r.a.createElement(b.a,{exact:!0,to:f.dashboard,activeClassName:"selected",className:"link"},"Dashboard"),r.a.createElement(b.a,{to:f.hrResolved,activeClassName:"selected",className:"link"},"Resolved Reports"),r.a.createElement("button",{className:"btn btn-outline-primary logoutBtn",onClick:function(){return e.props.auth.logout()}},"Logout")))}}]),t}(n.Component),L=(a(166),a(12)),F=(a(168),function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B,{data:this.props.location.state}))}}]),t}(n.Component)),B=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{data:this.props.data}))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).firebase=new C,a.state={firstval:a.props.data.status,val:a.props.data.status},a.handleChange=a.handleChange.bind(Object(L.a)(Object(L.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(L.a)(Object(L.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({val:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({firstval:this.state.val}),this.firebase.updateStatus(this.props.data.key,this.state.val)}},{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("div",{id:"header"},r.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,value:this.state.val},r.a.createElement("select",null,r.a.createElement("option",{value:"Validated"},"Validated"),r.a.createElement("option",{value:"Awaiting Review"},"Awaiting Review"),r.a.createElement("option",{value:"Mediation"},"Mediation"),r.a.createElement("option",{value:"Corrective Action"},"Corrective Action"),r.a.createElement("option",{value:"Final Investigative Report Submitted"},"Final Investigative Report Submitted"),r.a.createElement("option",{value:"Resolved"},"Resolved")),r.a.createElement("input",{type:"submit",value:"submit"}))),r.a.createElement("div",{className:"responses"},r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"reponse"}," Name:",r.a.createElement("p",{className:"replies"}," ",this.props.data.name," ")),r.a.createElement("div",{className:"reponse"}," Date:",r.a.createElement("p",{className:"replies"}," ",this.props.data.date," "))),r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"reponse"}," Type:",r.a.createElement("p",{className:"replies"}," ",this.props.data.type," ")),r.a.createElement("div",{className:"reponse"}," Description:",r.a.createElement("p",{className:"replies"}," ",this.props.data.description," "))),r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"reponse"}," Your Response:",r.a.createElement("p",{className:"replies"}," ",this.state.firstval," ")),r.a.createElement("div",{className:"response"}," Accused Harasser:",r.a.createElement("p",{className:"replies"}," ",this.props.data.harasser," ")))))}}]),t}(n.Component),U=a(185),P=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U.a,null,r.a.createElement(d.a,{path:f.hrReport,component:F})),r.a.createElement(V,null))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={shouldRedirect:!1,rows:[]},a.firebase=new C,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"handleClick",value:function(e,t,a,n,r,s,i){this.setState({shouldRedirect:!0,selectedStatus:e,selectedDate:a,selectedName:t,selectedType:n,selectedDesc:r,selectedKey:s,selectedHarasser:i})}},{key:"handleData",value:function(e){this.setState({rows:e})}},{key:"createRows",value:function(){var e=this,t=[];this.firebase.getByStatus("Resolved").then(function(a){var n=function(){var n;n=Object.keys(a[s])[0];var c=a[s][n];i="t2row"+s;var o=c.status,l=c.name,u=c.datetime,m=c.type,h=c.harasser,d=c.description;t.push(r.a.createElement("button",{key:i,onClick:function(){return e.handleClick(o,l,u,m,d,n,h)}},r.a.createElement("div",{className:"rows "+("bystander"===c.reportType?"bystander":"firstHand")},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"head"},r.a.createElement("h2",null," ",l," "),r.a.createElement("p",{className:o.replace(/\s+/g,"")}," ",o," ")),r.a.createElement("p",{className:"date"}," ",u," "),r.a.createElement("p",{className:"type"}," ",m," ")))))};for(var s in a){var i;n()}e.handleData(t)})}},{key:"render",value:function(){return this.state.shouldRedirect?r.a.createElement(T.a,{push:!0,to:{pathname:f.hrReport,state:{name:this.state.selectedName,status:this.state.selectedStatus,date:this.state.selectedDate,type:this.state.selectedType,description:this.state.selectedDesc,key:this.state.selectedKey,harasser:this.state.selectedHarasser}}}):r.a.createElement("div",{id:"table2"},this.state.rows)}}]),t}(n.Component),K=(a(170),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U.a,null,r.a.createElement(d.a,{path:f.hrReport,component:F})),r.a.createElement(W,null))}}]),t}(n.Component)),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={shouldRedirect:!1,rows:[],selectedName:"",selectedDate:null,selectedStatus:"",selectedType:"",selectedHarasser:""},a.firebase=new C,a.handleClick=a.handleClick.bind(Object(L.a)(Object(L.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleClick",value:function(e,t,a,n,r,s,i){this.setState({shouldRedirect:!0,selectedStatus:e,selectedDate:a,selectedName:t,selectedType:n,selectedDesc:r,selectedKey:s,selectedHarasser:i})}},{key:"componentDidMount",value:function(){this.createRows()}},{key:"handleData",value:function(e){this.setState({rows:e})}},{key:"createRows",value:function(){for(var e=this,t=[],a=["Awaiting Review","Validated","Mediation","Corrective Action","Final Investigative Report Submitted"],n=0;n<a.length;n++)this.firebase.getByStatus(a[n]).then(function(a){var n=function(){var n;n=Object.keys(a[s])[0];var c=a[s][n];i="t1row"+c.datetime+s;var o=c.status,l=c.name,u=c.datetime,m=c.type,h=c.description,d=c.harasser;console.log(c),t.push(r.a.createElement("button",{key:i,onClick:function(){return e.handleClick(o,l,u,m,h,n,d)}},r.a.createElement("div",{className:"rows "+("bystander"===c.reportType?"bystander":"firstHand")},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"head"},r.a.createElement("h2",null," ",l," "),r.a.createElement("p",{className:o.replace(/\s+/g,"")}," ",o," ")),r.a.createElement("p",{className:"date"}," ",u," "),r.a.createElement("p",{className:"type"}," ",m," ")))))};for(var s in a){var i;n()}e.handleData(t)})}},{key:"render",value:function(){return this.state.shouldRedirect?r.a.createElement(T.a,{push:!0,to:{pathname:f.hrReport,state:{name:this.state.selectedName,status:this.state.selectedStatus,date:this.state.selectedDate,type:this.state.selectedType,description:this.state.selectedDesc,key:this.state.selectedKey,harasser:this.state.selectedHarasser}}}):r.a.createElement("div",{id:"table1"},this.state.rows)}}]),t}(n.Component),J=(a(172),a(174),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.initViz()}},{key:"initViz",value:function(){var e=this.vizContainer;new window.tableau.Viz(e,"https://public.tableau.com/views/worksafeDashboard/Dashboard1?:embed=y&:display_count=yes&publish=yes&:origin=viz_share_link")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mainDashboard",ref:function(t){e.vizContainer=t}})}}]),t}(r.a.Component)),G=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.auth.isAuthenticated()||(this.props.auth.setEmployeeType("employee"),this.props.auth.login()),this.props.auth.getIsHr()?r.a.createElement("div",{className:"body"},r.a.createElement("div",null,r.a.createElement(M,{auth:this.props.auth})),r.a.createElement("div",{className:"main"},r.a.createElement(d.a,{path:f.hrPage,component:K}),r.a.createElement(d.a,{path:f.dashboard,component:J}),r.a.createElement(d.a,{path:f.hrResolved,component:P}),r.a.createElement(d.a,{path:f.hrReport,component:F}),r.a.createElement(T.a,{to:f.hrPage}))):r.a.createElement("div",null,r.a.createElement("p",null,"You are not authorized to use this application"))}}]),t}(n.Component),Q=a(74),Y=a.n(Q),Z=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},r.a.createElement("p",null,"Callback"),r.a.createElement("img",{src:Y.a,alt:"loading"}))}}]),t}(n.Component),$=a(58),q={domain:"koolkids.auth0.com",clientId:"JfaD0c44H9h62aDA1JxjtKOa9G5E7QCx",callbackUrl:f.url+"#/callback",tokenUrl:"https://koolkids.auth0.com/oauth/token"},X=a(181),ee=function(){function e(){Object(c.a)(this,e),this.user=new X.a,this.auth0=new $.a.WebAuth({domain:q.domain,clientID:q.clientId,redirectUri:q.callbackUrl,responseType:"token id_token",scope:"openid openid profile read:current_user update:current_user update:users create:current_user_metadata update:current_user_metadata create:users_app_metadata update:users_app_metadata"});var t=localStorage.getItem("isHr");this.isHr=!(!t||"true"!==t),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this),this.updateMetadata=this.updateMetadata.bind(this),this.getIsHr=this.getIsHr.bind(this),this.empType=localStorage.getItem("empType")}return Object(o.a)(e,[{key:"setEmployeeType",value:function(e){localStorage.setItem("empType",e),this.empType=e}},{key:"login",value:function(){this.auth0.authorize({audience:"https://koolkids.auth0.com/api/v2/"})}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash({hash:window.location.hash.split("callback")[1]},function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(window.location.href=f.url+"#/",console.error(t),alert("Error: ".concat(t.error,". Check the console for further details.")))})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"getIsHr",value:function(){return"true"===localStorage.getItem("isHr")||this.isHr}},{key:"setSession",value:function(e){var t=this;localStorage.setItem("isLoggedIn","true");var a=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=a,this.accessToken&&(this.getManagement(),this.auth0.client.userInfo(this.accessToken,function(e,a){e?console.error(e):(t.userId=a.sub,t.auth0Manage.getUser(t.userId,function(e,a){e?console.error(e):(t.user.next(a),t.checkFirstLogin(a))}))}))}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(e.logout(),console.error(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),this.auth0.logout({return_to:window.location.origin}),window.location.href=f.url}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}},{key:"checkFirstLogin",value:function(e){e.user_metadata?(e.user_metadata.isHr&&(localStorage.setItem("isHr","true"),this.isHr=e.user_metadata.isHr),window.location.href=f.url+"#/"+this.empType):window.location.href=f.url+"#"+f.register}},{key:"updateMetadata",value:function(e){var t=this;this.auth0Manage.patchUserMetadata(this.userId,e,function(a,n){a?console.error(a):(t.user.next(n),t.isHr=e.isHr,t.isHr?localStorage.setItem("isHr","true"):localStorage.setItem("isHr","false"),window.location.href=f.url+"#/"+t.empType)})}},{key:"getManagement",value:function(){this.auth0Manage=new $.a.Management({domain:q.domain,token:this.accessToken})}}]),e}(),te=(a(175),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).auth=new ee,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("#");e[1].includes("/access_token")&&(window.location.href=e[0]+"#/callback#"+e[1])}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(d.a,{path:f.register,render:function(t){return r.a.createElement(p,Object.assign({auth:e.auth},t))}}),r.a.createElement(d.a,{path:f.employee,render:function(t){return r.a.createElement(A,Object.assign({auth:e.auth},t))}}),r.a.createElement(d.a,{path:f.hr,render:function(t){return r.a.createElement(G,Object.assign({auth:e.auth},t))}}),r.a.createElement(d.a,{path:f.callback,render:function(t){return function(e,t){var a=e.location;/access_token|id_token|error/.test(a.hash)&&t.handleAuthentication()}(t,e.auth),r.a.createElement(Z,t)}}),r.a.createElement(d.a,{exact:!0,path:f.login,render:function(){return r.a.createElement("div",{style:ae},r.a.createElement("div",null,r.a.createElement("h4",null,"Login as:"),r.a.createElement("button",{className:"btn btn-outline-primary empSelect mr-2",onClick:function(){e.auth.setEmployeeType("employee"),e.auth.login()}},"Employee"),r.a.createElement("button",{className:"btn btn-outline-primary empSelect",onClick:function(){e.auth.setEmployeeType("hr"),e.auth.login()}},"HR")))}})))}}]),t}(n.Component)),ae={height:"66vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,a){e.exports=a.p+"static/media/anothaone.4861f4d3.png"},73:function(e,t,a){e.exports=a.p+"static/media/anothaone.4861f4d3.png"},74:function(e,t,a){e.exports=a.p+"static/media/loading.c5590569.svg"},75:function(e,t,a){e.exports=a(177)},80:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){}},[[75,2,1]]]);
//# sourceMappingURL=main.500b7821.chunk.js.map